function TrinityChurchJSL(){"use strict";var httpRequest=new XMLHttpRequest(),result="";this.getXML=function(feed,responseFunc,args){httpRequest.open("GET",feed,false);try{httpRequest.onreadystatechange=function(){if(httpRequest.readyState===4&&httpRequest.status===200){result=httpRequest.responseXML;if(responseFunc!==""&&responseFunc!==undefined){responseFunc(args,result)}}else if(httpRequest.readyState===4&&httpRequest.status!==200){result="Couldn't download the feed."}}}catch(e){this.caughtError(e)}finally{httpRequest.send()}return result};this.caughtError=function(e){return e}}TrinityChurchJSL.prototype.getNews=function(format,responseFunc,args){"use strict";var response="",feed="";if(format!=="rss"&&format!=="rss2"&&format!=="atom"){format="rss2"}feed="http://www.trinityeaston.org/?feed="+format||"http://www.trinityeaston.org/?feed=rss2";try{response=this.getXML(feed,responseFunc,args)}catch(e){response=this.caughtError(e)}finally{if(typeof response===undefined){this.caughtError("Can't load data")}}return response};TrinityChurchJSL.prototype.getBlog=function(format,responseFunc,args){"use strict";var response="",feed="";if(format!=="rss"&&format!=="atom"){format=(format==="rss2")?"rss":"atom"}feed="http://trinityeaston.blogspot.com/feeds/posts/default?alt="+format||"http://trinityeaston.blogspot.com/feeds/posts/default";try{response=this.getXML(feed,responseFunc,args)}catch(e){response=this.caughtError(e)}finally{if(typeof response===undefined){this.caughtError("Can't load data")}}return response};TrinityChurchJSL.prototype.getTwitter=function(format,tweetsNumber,responseFunc,args){"use strict";var tweets=tweetsNumber||8,feed="",response="";if(format!=="rss"&&format!=="xml"){format="rss"}feed="http://api.twitter.com/1/statuses/user_timeline."+format+"?include_rts=true&screen_name=trinityeastonpa&count="+tweets;try{response=this.getXML(feed,responseFunc,args)}catch(e){response=this.caughtError(e)}finally{if(typeof response===undefined){this.caughtError("Can't load data")}}return response};TrinityChurchJSL.prototype.getFacebook=function(responseFunc,args){"use strict";var feed="http://www.facebook.com/feeds/page.php?id=99634166137&format=atom10",response="";try{response=this.getXML(feed,responseFunc,args)}catch(e){response=this.caughtError(e)}finally{if(typeof response===undefined){this.caughtError("Can't load data")}}return response};TrinityChurchJSL.prototype.getCalendar=function(days,responseFunc,args){"use strict";var dayCount=days||14,feed="http://www.mychurchevents.com/Calendar/RSS.ashx?days="+dayCount+"&ci=L6M7G1G1L6H2G1G1&igd=",response="";try{response=this.getXML(feed,responseFunc,args)}catch(e){response=this.caughtError(e)}finally{if(typeof response===undefined){this.caughtError("Can't load data")}}return response};TrinityChurchJSL.prototype.getServiceTimes=function(caching,responseFunc,args){"use strict";var cache=caching||false,feed="http://www.trinityeaston.org/trinjal/data/servicetimes.xml",response="",today=new Date(),time=today.getHours()+today.getMinutes()+today.getSeconds(),cacheBuster="?"+time;if(!cache){feed=feed+cacheBuster}try{response=this.getXML(feed,responseFunc,args)}catch(e){response=this.caughtError(e)}finally{if(typeof response===undefined){this.caughtError("Can't load data")}}return response};var trinjal=new TrinityChurchJSL();